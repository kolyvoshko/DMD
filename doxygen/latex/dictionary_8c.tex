\hypertarget{dictionary_8c}{}\section{dictionary.\+c File Reference}
\label{dictionary_8c}\index{dictionary.\+c@{dictionary.\+c}}


Implements a dictionary for string variables.  


{\ttfamily \#include \char`\"{}dictionary.\+h\char`\"{}}\\*
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include $<$unistd.\+h$>$}\\*
Include dependency graph for dictionary.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=329pt]{dictionary_8c__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{dictionary_8c_a071228a4e1c69ac2eec59e9c1385185a}{M\+A\+X\+V\+A\+L\+S\+Z}~1024
\item 
\#define \hyperlink{dictionary_8c_aaf4ab97b3163920286cb932a3faedf86}{D\+I\+C\+T\+M\+I\+N\+S\+Z}~128
\item 
\#define \hyperlink{dictionary_8c_a220dbd9af990c8faebfd01bd62b2dde4}{D\+I\+C\+T\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+K\+E\+Y}~((char$\ast$)-\/1)
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
unsigned \hyperlink{dictionary_8c_a7c1ef0a729e668d1e8d6a7e774feaf2e}{dictionary\+\_\+hash} (const char $\ast$key)
\begin{DoxyCompactList}\small\item\em Compute the hash key for a string. \end{DoxyCompactList}\item 
\hyperlink{dictionary_8h_a5bd3b2ce42b776c76755ec65642f43af}{dictionary} $\ast$ \hyperlink{dictionary_8c_a9f584d70e3559fe6fe5f62a112bc7b17}{dictionary\+\_\+new} (int size)
\begin{DoxyCompactList}\small\item\em Create a new dictionary object. \end{DoxyCompactList}\item 
void \hyperlink{dictionary_8c_a11b19a39bef9cf05b19adb01ced4fae5}{dictionary\+\_\+del} (\hyperlink{dictionary_8h_a5bd3b2ce42b776c76755ec65642f43af}{dictionary} $\ast$d)
\begin{DoxyCompactList}\small\item\em Delete a dictionary object. \end{DoxyCompactList}\item 
char $\ast$ \hyperlink{dictionary_8c_a967311464f457bcb8150ce981ef3c6dd}{dictionary\+\_\+get} (\hyperlink{dictionary_8h_a5bd3b2ce42b776c76755ec65642f43af}{dictionary} $\ast$d, const char $\ast$key, char $\ast$def)
\begin{DoxyCompactList}\small\item\em Get a value from a dictionary. \end{DoxyCompactList}\item 
int \hyperlink{dictionary_8c_aca582586180a1cd058017e337250848d}{dictionary\+\_\+set} (\hyperlink{dictionary_8h_a5bd3b2ce42b776c76755ec65642f43af}{dictionary} $\ast$d, const char $\ast$key, const char $\ast$val)
\begin{DoxyCompactList}\small\item\em Set a value in a dictionary. \end{DoxyCompactList}\item 
void \hyperlink{dictionary_8c_a27f0752948d52ccd2568dae22f5db2bc}{dictionary\+\_\+unset} (\hyperlink{dictionary_8h_a5bd3b2ce42b776c76755ec65642f43af}{dictionary} $\ast$d, const char $\ast$key)
\begin{DoxyCompactList}\small\item\em Delete a key in a dictionary. \end{DoxyCompactList}\item 
void \hyperlink{dictionary_8c_a6e29ecf9c79331b1c6c26cd662cba042}{dictionary\+\_\+dump} (\hyperlink{dictionary_8h_a5bd3b2ce42b776c76755ec65642f43af}{dictionary} $\ast$d, F\+I\+L\+E $\ast$out)
\begin{DoxyCompactList}\small\item\em Dump a dictionary to an opened file pointer. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Implements a dictionary for string variables. 

\begin{DoxyAuthor}{Author}
N. Devillard This module implements a simple dictionary object, i.\+e. a list of string/string associations. This object is useful to store e.\+g. informations retrieved from a configuration file (ini files). 
\end{DoxyAuthor}


\subsection{Macro Definition Documentation}
\hypertarget{dictionary_8c_a220dbd9af990c8faebfd01bd62b2dde4}{}\index{dictionary.\+c@{dictionary.\+c}!D\+I\+C\+T\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+K\+E\+Y@{D\+I\+C\+T\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+K\+E\+Y}}
\index{D\+I\+C\+T\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+K\+E\+Y@{D\+I\+C\+T\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+K\+E\+Y}!dictionary.\+c@{dictionary.\+c}}
\subsubsection[{D\+I\+C\+T\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+K\+E\+Y}]{\setlength{\rightskip}{0pt plus 5cm}\#define D\+I\+C\+T\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+K\+E\+Y~((char$\ast$)-\/1)}\label{dictionary_8c_a220dbd9af990c8faebfd01bd62b2dde4}
Invalid key token 

Definition at line 30 of file dictionary.\+c.

\hypertarget{dictionary_8c_aaf4ab97b3163920286cb932a3faedf86}{}\index{dictionary.\+c@{dictionary.\+c}!D\+I\+C\+T\+M\+I\+N\+S\+Z@{D\+I\+C\+T\+M\+I\+N\+S\+Z}}
\index{D\+I\+C\+T\+M\+I\+N\+S\+Z@{D\+I\+C\+T\+M\+I\+N\+S\+Z}!dictionary.\+c@{dictionary.\+c}}
\subsubsection[{D\+I\+C\+T\+M\+I\+N\+S\+Z}]{\setlength{\rightskip}{0pt plus 5cm}\#define D\+I\+C\+T\+M\+I\+N\+S\+Z~128}\label{dictionary_8c_aaf4ab97b3163920286cb932a3faedf86}
Minimal allocated number of entries in a dictionary 

Definition at line 27 of file dictionary.\+c.

\hypertarget{dictionary_8c_a071228a4e1c69ac2eec59e9c1385185a}{}\index{dictionary.\+c@{dictionary.\+c}!M\+A\+X\+V\+A\+L\+S\+Z@{M\+A\+X\+V\+A\+L\+S\+Z}}
\index{M\+A\+X\+V\+A\+L\+S\+Z@{M\+A\+X\+V\+A\+L\+S\+Z}!dictionary.\+c@{dictionary.\+c}}
\subsubsection[{M\+A\+X\+V\+A\+L\+S\+Z}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+A\+X\+V\+A\+L\+S\+Z~1024}\label{dictionary_8c_a071228a4e1c69ac2eec59e9c1385185a}
Maximum value size for integers and doubles. 

Definition at line 24 of file dictionary.\+c.



\subsection{Function Documentation}
\hypertarget{dictionary_8c_a11b19a39bef9cf05b19adb01ced4fae5}{}\index{dictionary.\+c@{dictionary.\+c}!dictionary\+\_\+del@{dictionary\+\_\+del}}
\index{dictionary\+\_\+del@{dictionary\+\_\+del}!dictionary.\+c@{dictionary.\+c}}
\subsubsection[{dictionary\+\_\+del(dictionary $\ast$d)}]{\setlength{\rightskip}{0pt plus 5cm}void dictionary\+\_\+del (
\begin{DoxyParamCaption}
\item[{{\bf dictionary} $\ast$}]{d}
\end{DoxyParamCaption}
)}\label{dictionary_8c_a11b19a39bef9cf05b19adb01ced4fae5}


Delete a dictionary object. 


\begin{DoxyParams}{Parameters}
{\em d} & dictionary object to deallocate. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void
\end{DoxyReturn}
Deallocate a dictionary object and all memory associated to it. 

Definition at line 143 of file dictionary.\+c.

\hypertarget{dictionary_8c_a6e29ecf9c79331b1c6c26cd662cba042}{}\index{dictionary.\+c@{dictionary.\+c}!dictionary\+\_\+dump@{dictionary\+\_\+dump}}
\index{dictionary\+\_\+dump@{dictionary\+\_\+dump}!dictionary.\+c@{dictionary.\+c}}
\subsubsection[{dictionary\+\_\+dump(dictionary $\ast$d, F\+I\+L\+E $\ast$out)}]{\setlength{\rightskip}{0pt plus 5cm}void dictionary\+\_\+dump (
\begin{DoxyParamCaption}
\item[{{\bf dictionary} $\ast$}]{d, }
\item[{F\+I\+L\+E $\ast$}]{out}
\end{DoxyParamCaption}
)}\label{dictionary_8c_a6e29ecf9c79331b1c6c26cd662cba042}


Dump a dictionary to an opened file pointer. 


\begin{DoxyParams}{Parameters}
{\em d} & Dictionary to dump \\
\hline
{\em f} & Opened file pointer. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void
\end{DoxyReturn}
Dumps a dictionary onto an opened file pointer. Key pairs are printed out as {\ttfamily }\mbox{[}Key\mbox{]}=\mbox{[}Value\mbox{]}, one per line. It is Ok to provide stdout or stderr as output file pointers. 

Definition at line 337 of file dictionary.\+c.

\hypertarget{dictionary_8c_a967311464f457bcb8150ce981ef3c6dd}{}\index{dictionary.\+c@{dictionary.\+c}!dictionary\+\_\+get@{dictionary\+\_\+get}}
\index{dictionary\+\_\+get@{dictionary\+\_\+get}!dictionary.\+c@{dictionary.\+c}}
\subsubsection[{dictionary\+\_\+get(dictionary $\ast$d, const char $\ast$key, char $\ast$def)}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ dictionary\+\_\+get (
\begin{DoxyParamCaption}
\item[{{\bf dictionary} $\ast$}]{d, }
\item[{const char $\ast$}]{key, }
\item[{char $\ast$}]{def}
\end{DoxyParamCaption}
)}\label{dictionary_8c_a967311464f457bcb8150ce981ef3c6dd}


Get a value from a dictionary. 


\begin{DoxyParams}{Parameters}
{\em d} & dictionary object to search. \\
\hline
{\em key} & Key to look for in the dictionary. \\
\hline
{\em def} & Default value to return if key not found. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 pointer to internally allocated character string.
\end{DoxyReturn}
This function locates a key in a dictionary and returns a pointer to its value, or the passed \textquotesingle{}def\textquotesingle{} pointer if no such key can be found in dictionary. The returned character pointer points to data internal to the dictionary object, you should not try to free it or modify it. 

Definition at line 175 of file dictionary.\+c.



Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=278pt]{dictionary_8c_a967311464f457bcb8150ce981ef3c6dd_cgraph}
\end{center}
\end{figure}


\hypertarget{dictionary_8c_a7c1ef0a729e668d1e8d6a7e774feaf2e}{}\index{dictionary.\+c@{dictionary.\+c}!dictionary\+\_\+hash@{dictionary\+\_\+hash}}
\index{dictionary\+\_\+hash@{dictionary\+\_\+hash}!dictionary.\+c@{dictionary.\+c}}
\subsubsection[{dictionary\+\_\+hash(const char $\ast$key)}]{\setlength{\rightskip}{0pt plus 5cm}unsigned dictionary\+\_\+hash (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{key}
\end{DoxyParamCaption}
)}\label{dictionary_8c_a7c1ef0a729e668d1e8d6a7e774feaf2e}


Compute the hash key for a string. 


\begin{DoxyParams}{Parameters}
{\em key} & Character string to use for key. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 unsigned int on at least 32 bits.
\end{DoxyReturn}
This hash function has been taken from an Article in Dr Dobbs Journal. This is normally a collision-\/free function, distributing keys evenly. The key is stored anyway in the struct so that collision can be avoided by comparing the key itself in last resort. 

Definition at line 88 of file dictionary.\+c.

\hypertarget{dictionary_8c_a9f584d70e3559fe6fe5f62a112bc7b17}{}\index{dictionary.\+c@{dictionary.\+c}!dictionary\+\_\+new@{dictionary\+\_\+new}}
\index{dictionary\+\_\+new@{dictionary\+\_\+new}!dictionary.\+c@{dictionary.\+c}}
\subsubsection[{dictionary\+\_\+new(int size)}]{\setlength{\rightskip}{0pt plus 5cm}{\bf dictionary}$\ast$ dictionary\+\_\+new (
\begin{DoxyParamCaption}
\item[{int}]{size}
\end{DoxyParamCaption}
)}\label{dictionary_8c_a9f584d70e3559fe6fe5f62a112bc7b17}


Create a new dictionary object. 


\begin{DoxyParams}{Parameters}
{\em size} & Optional initial size of the dictionary. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 newly allocated dictionary objet.
\end{DoxyReturn}
This function allocates a new dictionary object of given size and returns it. If you do not know in advance (roughly) the number of entries in the dictionary, give size=0. 

Definition at line 117 of file dictionary.\+c.

\hypertarget{dictionary_8c_aca582586180a1cd058017e337250848d}{}\index{dictionary.\+c@{dictionary.\+c}!dictionary\+\_\+set@{dictionary\+\_\+set}}
\index{dictionary\+\_\+set@{dictionary\+\_\+set}!dictionary.\+c@{dictionary.\+c}}
\subsubsection[{dictionary\+\_\+set(dictionary $\ast$d, const char $\ast$key, const char $\ast$val)}]{\setlength{\rightskip}{0pt plus 5cm}int dictionary\+\_\+set (
\begin{DoxyParamCaption}
\item[{{\bf dictionary} $\ast$}]{d, }
\item[{const char $\ast$}]{key, }
\item[{const char $\ast$}]{val}
\end{DoxyParamCaption}
)}\label{dictionary_8c_aca582586180a1cd058017e337250848d}


Set a value in a dictionary. 


\begin{DoxyParams}{Parameters}
{\em d} & dictionary object to modify. \\
\hline
{\em key} & Key to modify or add. \\
\hline
{\em val} & Value to add. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 0 if Ok, anything else otherwise
\end{DoxyReturn}
If the given key is found in the dictionary, the associated value is replaced by the provided one. If the key cannot be found in the dictionary, it is added to it.

It is Ok to provide a N\+U\+L\+L value for val, but N\+U\+L\+L values for the dictionary or the key are considered as errors\+: the function will return immediately in such a case.

Notice that if you dictionary\+\_\+set a variable to N\+U\+L\+L, a call to dictionary\+\_\+get will return a N\+U\+L\+L value\+: the variable will be found, and its value (N\+U\+L\+L) is returned. In other words, setting the variable content to N\+U\+L\+L is equivalent to deleting the variable from the dictionary. It is not possible (in this implementation) to have a key in the dictionary without value.

This function returns non-\/zero in case of failure. 

Definition at line 221 of file dictionary.\+c.



Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=278pt]{dictionary_8c_aca582586180a1cd058017e337250848d_cgraph}
\end{center}
\end{figure}


\hypertarget{dictionary_8c_a27f0752948d52ccd2568dae22f5db2bc}{}\index{dictionary.\+c@{dictionary.\+c}!dictionary\+\_\+unset@{dictionary\+\_\+unset}}
\index{dictionary\+\_\+unset@{dictionary\+\_\+unset}!dictionary.\+c@{dictionary.\+c}}
\subsubsection[{dictionary\+\_\+unset(dictionary $\ast$d, const char $\ast$key)}]{\setlength{\rightskip}{0pt plus 5cm}void dictionary\+\_\+unset (
\begin{DoxyParamCaption}
\item[{{\bf dictionary} $\ast$}]{d, }
\item[{const char $\ast$}]{key}
\end{DoxyParamCaption}
)}\label{dictionary_8c_a27f0752948d52ccd2568dae22f5db2bc}


Delete a key in a dictionary. 


\begin{DoxyParams}{Parameters}
{\em d} & dictionary object to modify. \\
\hline
{\em key} & Key to remove. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void
\end{DoxyReturn}
This function deletes a key in a dictionary. Nothing is done if the key cannot be found. 

Definition at line 288 of file dictionary.\+c.



Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=289pt]{dictionary_8c_a27f0752948d52ccd2568dae22f5db2bc_cgraph}
\end{center}
\end{figure}


